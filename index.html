<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ===================== SEO META TAGS ===================== -->
    <title>CampusTrend UEW - Connect with Students | University of Education, Winneba</title>
    <meta name="description" content="CampusTrend is the social platform for University of Education, Winneba (UEW) students. Share posts, follow classmates, and stay updated on campus trends.">
    <meta name="keywords" content="UEW, University of Education Winneba, CampusTrend, UEW students, Ghana university, campus social, student network">
    <meta name="author" content="CampusTrend UEW">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://campustrend-uew.com/index.html">

    <!-- Open Graph (for social sharing previews) -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="CampusTrend UEW - Connect with Students">
    <meta property="og:description" content="The social platform for University of Education, Winneba students. Share, follow, and stay on trend.">
    <meta property="og:url" content="https://campustrend-uew.com/">
    <meta property="og:site_name" content="CampusTrend UEW">
    <meta property="og:locale" content="en_GH">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="CampusTrend UEW - Connect with Students">
    <meta name="twitter:description" content="The social platform for University of Education, Winneba students.">

    <!-- ===================== PERFORMANCE ===================== -->
    <!-- Preconnect to ALL external origins used by the page -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://kkvelbfcwaydxiwzsnpb.supabase.co" crossorigin>
    <link rel="dns-prefetch" href="https://kkvelbfcwaydxiwzsnpb.supabase.co">

    <!-- Font Awesome: inline subset (only icons we use) - saves 17 KiB vs loading all.min.css -->
    <style id="fa-icons">/* Font Awesome Critical - only icons used by CampusTrend */
@font-face{font-family:"Font Awesome 6 Free";font-style:normal;font-weight:900;font-display:swap;src:url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2) format("woff2")}
.fas{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;line-height:1;text-rendering:auto;font-family:"Font Awesome 6 Free";font-weight:900}
.fa-graduation-cap:before{content:"\f19d"}
.fa-bell:before{content:"\f0f3"}
.fa-fire:before{content:"\f06d"}
.fa-building:before{content:"\f1ad"}
.fa-star:before{content:"\f005"}
.fa-cloud-upload-alt:before{content:"\f382"}
.fa-home:before{content:"\f015"}
.fa-paper-plane:before{content:"\f1d8"}
.fa-link:before{content:"\f0c1"}
.fa-times:before{content:"\f00d"}
.fa-globe-africa:before{content:"\f57c"}
.fa-heart:before{content:"\f004"}
.fa-comment:before{content:"\f075"}
.fa-share:before{content:"\f064"}
.fa-user-plus:before{content:"\f234"}
.fa-user-check:before{content:"\f4fc"}
.fa-check-circle:before{content:"\f058"}
.fa-exclamation-circle:before{content:"\f06a"}
.fa-exclamation-triangle:before{content:"\f071"}
.fa-image:before{content:"\f03e"}
.fa-spinner:before{content:"\f110"}</style>

    <!-- App Stylesheet -->
    <link rel="stylesheet" href="styles/index.css">

    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#1877f2">

    <!-- Critical inline CSS: prevents CLS by reserving image space before stylesheet loads -->
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:#f0f2f5;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}
        .header{background:linear-gradient(135deg,#1877f2,#42b72a);padding:12px 20px;position:fixed;top:0;left:0;right:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;min-height:58px}
        .main-layout{display:flex;max-width:1200px;margin:78px auto 20px;padding:20px;gap:20px}
        /* Reserve image space to prevent CLS - aspect-ratio trick */
        .post-image-container{width:100%;background:#e4e6e9;position:relative;overflow:hidden}
        .post-image{width:100%;aspect-ratio:4/3;object-fit:contain;display:block;background:#e4e6e9}
        .post-card{background:#fff;border-radius:8px;margin-bottom:16px;box-shadow:0 1px 2px rgba(0,0,0,.1);overflow:hidden}
     
        .post-skeleton{background:#fff;border-radius:8px;margin-bottom:16px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.1)}
        .skeleton-line{background:linear-gradient(90deg,#e4e6e9 25%,#f0f2f5 50%,#e4e6e9 75%);animation:shimmer 1.5s infinite;border-radius:4px;height:14px;margin-bottom:10px}
        .skeleton-avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(90deg,#e4e6e9 25%,#f0f2f5 50%,#e4e6e9 75%);animation:shimmer 1.5s infinite}
        .skeleton-image{width:100%;aspect-ratio:4/3;background:linear-gradient(90deg,#e4e6e9 25%,#f0f2f5 50%,#e4e6e9 75%);animation:shimmer 1.5s infinite;border-radius:4px}
        @keyframes shimmer{0%,100%{opacity:1}50%{opacity:.6}}
        /* Skip link */
        .skip-link{position:absolute;top:-100px;left:16px;background:#1877f2;color:#fff;padding:10px 18px;border-radius:0 0 8px 8px;font-size:14px;font-weight:600;text-decoration:none;z-index:9999;transition:top .2s}
        .skip-link:focus{top:0}
    </style>
</head>
<body>
    <!-- ===================== SKIP NAVIGATION (Accessibility) ===================== -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header class="header" role="banner">
        <div class="logo">
            <!-- aria-hidden on decorative icon; text provides the label -->
            <i class="fas fa-graduation-cap" aria-hidden="true"></i>
            <div>
                <span>CampusTrend</span>
                <div class="logo-subtitle">University of Education, Winneba</div>
            </div>
        </div>

        <div class="header-right">
            <nav aria-label="Primary navigation">UEW pasco</nav>

            <!-- Notification Bell -->
            <div
                class="notification-bell"
                id="notificationBell"
                role="button"
                tabindex="0"
                aria-label="Notifications"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="notificationDropdown"
            >
                <i class="fas fa-bell" aria-hidden="true"></i>
                <span
                    class="notification-badge"
                    id="notificationBadge"
                    aria-live="polite"
                    aria-label="0 unread notifications"
                >0</span>

                <!-- Notification Dropdown -->
                <div
                    class="notification-dropdown"
                    id="notificationDropdown"
                    role="dialog"
                    aria-label="Notifications panel"
                    aria-modal="false"
                >
                    <div class="notification-header">
                        <h3 id="notificationTitle">Notifications</h3>
                        <div class="notification-actions">
                            <button class="notification-action-btn" id="markAllRead" aria-label="Mark all notifications as read">
                                Mark all read
                            </button>
                        </div>
                    </div>
                    <div
                        class="notification-list"
                        id="notificationList"
                        role="list"
                        aria-labelledby="notificationTitle"
                    >
                        <!-- Notifications rendered by JS -->
                    </div>
                </div>
            </div>

            <!-- User Profile -->
            <div
                class="user-profile"
                id="userProfile"
                role="button"
                tabindex="0"
                aria-label="View your profile"
            >
                <div class="user-avatar" id="currentUserAvatar" aria-hidden="true">U</div>
                <span class="user-name" id="currentUserName">User</span>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <main class="main-layout" id="main-content">

        <!-- Sidebar - Trends -->
        <aside class="sidebar" aria-label="Trending topics and departments">

            <div class="trends-card">
                <h2 class="trends-header">
                    <i class="fas fa-fire" aria-hidden="true"></i>
                    Trending at UEW
                </h2>
                <div id="trendsList" aria-label="Trending topics"></div>
            </div>

            <div class="departments-card">
                <h3 class="departments-header">
                    <i class="fas fa-building" aria-hidden="true"></i>
                    Departments
                </h3>
                <div id="departmentTags" role="group" aria-label="Filter by department"></div>
            </div>

            <!-- Star Rating Legend -->
            <div class="trends-card" style="margin-top: 15px;">
                <h3 class="departments-header">
                    <i class="fas fa-star" aria-hidden="true" style="color: #ffd700;"></i>
                    Star Ratings
                </h3>
                <dl class="star-legend" style="font-size: 13px; color: #65676b; line-height: 1.8;">
                    <div class="star-legend-row">
                        <dt>
                            <span class="star-rating-badge stars-1" style="animation: none; margin: 0;" aria-label="1 star - Trending">
                                <i class="fas fa-star" aria-hidden="true"></i>
                                <span class="star-rating-label">Trending</span>
                            </span>
                        </dt>
                        <dd>5+ likes</dd>
                    </div>
                    <div class="star-legend-row">
                        <dt>
                            <span class="star-rating-badge stars-2" style="animation: none; margin: 0;" aria-label="2 stars - Rising">
                                <i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i>
                                <span class="star-rating-label">Rising</span>
                            </span>
                        </dt>
                        <dd>10+ likes</dd>
                    </div>
                    <div class="star-legend-row">
                        <dt>
                            <span class="star-rating-badge stars-3" style="animation: none; margin: 0;" aria-label="3 stars - Popular">
                                <i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i>
                                <span class="star-rating-label">Popular</span>
                            </span>
                        </dt>
                        <dd>15+ likes</dd>
                    </div>
                    <div class="star-legend-row">
                        <dt>
                            <span class="star-rating-badge stars-4" style="animation: none; margin: 0;" aria-label="4 stars - Viral">
                                <i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i>
                                <span class="star-rating-label">Viral</span>
                            </span>
                        </dt>
                        <dd>50+ likes</dd>
                    </div>
                    <div class="star-legend-row">
                        <dt>
                            <span class="star-rating-badge stars-5" style="animation: none; margin: 0;" aria-label="5 stars - Legendary">
                                <i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i><i class="fas fa-star" aria-hidden="true"></i>
                                <span class="star-rating-label">Legendary</span>
                            </span>
                        </dt>
                        <dd>100+ likes</dd>
                    </div>
                </dl>
            </div>
        </aside>

        <!-- Feed Container -->
        <section class="feed-container" aria-label="Campus feed">
            <div class="feed-header">
                <h1 class="feed-title">Campus Feed</h1>
                <button class="upload-btn" id="openUploadModal" aria-label="Upload a new post">
                    <i class="fas fa-cloud-upload-alt" aria-hidden="true"></i>
                    <span>Upload</span>
                </button>
                <div class="feed-filter" role="group" aria-label="Filter posts">
                    <button class="filter-btn active" data-filter="all" aria-pressed="true">All Posts</button>
                    <button class="filter-btn" data-filter="popular" aria-pressed="false">Popular</button>
                    <button class="filter-btn" data-filter="recent" aria-pressed="false">Recent</button>
                </div>
            </div>
            <div id="postsContainer" aria-live="polite" aria-label="Posts"></div>
        </section>
    </main>

    <!-- ===================== UPLOAD MODAL ===================== -->
    <div
        class="modal-overlay"
        id="uploadModal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="uploadModalTitle"
        aria-hidden="true"
    >
        <div class="modal">
            <div class="modal-header">
                <div></div>
                <h2 class="modal-title" id="uploadModalTitle">Create Post</h2>
                <button class="modal-close" id="closeUploadModal" aria-label="Close create post dialog">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-user">
                    <div class="user-avatar" id="modalUserAvatar" aria-hidden="true">U</div>
                    <div>
                        <div class="post-username" id="modalUserName">User</div>
                        <div class="post-meta"><i class="fas fa-globe-africa" aria-hidden="true"></i> Public</div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="departmentSelect">Department <span aria-label="required">*</span></label>
                    <select class="form-select" id="departmentSelect" required aria-required="true">
                        <option value="">Select your department</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="postDescription">Description</label>
                    <textarea
                        class="form-textarea"
                        id="postDescription"
                        placeholder="Write something about your image..."
                        maxlength="2000"
                        aria-describedby="charCountLabel"
                    ></textarea>
                    <div class="char-count" id="charCountLabel" aria-live="polite">
                        <span id="charCount">0</span>/2000 characters
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="imageInput">Image <span aria-label="required">*</span></label>
                    <div
                        class="image-upload-area"
                        id="imageUploadArea"
                        role="button"
                        tabindex="0"
                        aria-label="Click to upload an image"
                    >
                        <div class="upload-placeholder" id="uploadPlaceholder">
                            <i class="fas fa-cloud-upload-alt upload-icon" aria-hidden="true"></i>
                            <div class="upload-text">Click to upload image</div>
                            <div class="upload-subtext">JPG, PNG or GIF (Max 10MB)</div>
                        </div>
                        <div class="image-preview-container" id="imagePreviewContainer">
                            <img src="" alt="Selected image preview" class="image-preview" id="imagePreview">
                            <button class="remove-image-btn" id="removeImageBtn" aria-label="Remove selected image">
                                <i class="fas fa-times" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                    <input type="file" class="hidden-input" id="imageInput" accept="image/*" aria-label="Upload image file">
                </div>
            </div>
            <div class="modal-footer">
                <button class="post-submit-btn" id="submitPostBtn" disabled aria-disabled="true">
                    <span id="submitBtnText">Post</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ===================== SHARE MODAL ===================== -->
    <div
        class="modal-overlay"
        id="shareModal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="shareModalTitle"
        aria-hidden="true"
        style="max-width: 450px;"
    >
        <div class="modal" style="max-width: 450px;">
            <div class="modal-header">
                <div></div>
                <h2 class="modal-title" id="shareModalTitle">Share Post</h2>
                <button class="modal-close" id="closeShareModal" aria-label="Close share dialog">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-options" role="list">
                    <div class="share-option" id="shareTimeline" role="listitem" tabindex="0" aria-label="Share to your timeline">
                        <div class="share-option-icon timeline" aria-hidden="true">
                            <i class="fas fa-home" aria-hidden="true"></i>
                        </div>
                        <div class="share-option-text">
                            <h4>Share to Timeline</h4>
                            <p>Post this to your timeline</p>
                        </div>
                    </div>
                    <div class="share-option" id="shareMessage" role="listitem" tabindex="0" aria-label="Send in a private message">
                        <div class="share-option-icon message" aria-hidden="true">
                            <i class="fas fa-paper-plane" aria-hidden="true"></i>
                        </div>
                        <div class="share-option-text">
                            <h4>Send in Message</h4>
                            <p>Share with friends privately</p>
                        </div>
                    </div>
                    <div class="share-option" id="copyLink" role="listitem" tabindex="0" aria-label="Copy post link to clipboard">
                        <div class="share-option-icon copy" aria-hidden="true">
                            <i class="fas fa-link" aria-hidden="true"></i>
                        </div>
                        <div class="share-option-text">
                            <h4>Copy Link</h4>
                            <p>Copy post link to clipboard</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===================== PROFILE MODAL ===================== -->
    <div
        class="modal-overlay"
        id="profileModal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="profileModalTitle"
        aria-hidden="true"
    >
        <div class="modal profile-modal-large">
            <div class="modal-header">
                <div></div>
                <h2 class="modal-title" id="profileModalTitle">Profile</h2>
                <button class="modal-close" id="closeProfileModal" aria-label="Close profile dialog">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-modal-content">
                    <div class="profile-modal-avatar" id="profileModalAvatar" role="img" aria-label="User avatar"></div>
                    <div class="profile-modal-name" id="profileModalName"></div>
                    <div class="profile-modal-department" id="profileModalDepartment"></div>
                    <dl class="profile-modal-stats" aria-label="Profile statistics">
                        <div class="profile-stat">
                            <dt class="profile-stat-label">Posts</dt>
                            <dd class="profile-stat-value" id="profilePostsCount">0</dd>
                        </div>
                        <div class="profile-stat">
                            <dt class="profile-stat-label">Followers</dt>
                            <dd class="profile-stat-value" id="profileFollowersCount">0</dd>
                        </div>
                        <div class="profile-stat">
                            <dt class="profile-stat-label">Following</dt>
                            <dd class="profile-stat-value" id="profileFollowingCount">0</dd>
                        </div>
                    </dl>
                    <button class="profile-follow-btn" id="profileFollowBtn" aria-label="Follow this user">Follow</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Star Milestone Notification -->
    <div
        class="star-milestone"
        id="starMilestone"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
    >
        <div class="star-milestone-stars" id="milestoneStars" aria-hidden="true"></div>
        <div class="star-milestone-text" id="milestoneText"></div>
    </div>

    <!-- Toast Notification -->
    <div
        class="toast"
        id="toast"
        role="status"
        aria-live="polite"
        aria-atomic="true"
    >
        <i class="fas fa-check-circle" aria-hidden="true"></i>
        <span id="toastMessage">Success!</span>
    </div>

    <!-- ===================== SCRIPTS ===================== -->
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

    <!-- Shared Config -->
    <script src="supabase-config.js" defer></script>

    <!-- Main App Script -->
    <script src="scripts/index.js" defer></script>
</body>
</html>